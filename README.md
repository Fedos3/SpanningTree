# Spanning Tree

Приложение для поиска остовного дерева с максимальным количеством листьев в графе с использованием параллельных вычислений.

## Структура проекта

Проект состоит из следующих компонентов:
- `SpanningTreeCore.dll` - C++ библиотека, реализующая алгоритмы работы с графами и остовными деревьями
- .NET приложение с графическим интерфейсом для визуализации и работы с графами

## Требования

- Microsoft Visual Studio 2022 или выше (для C++ библиотеки)
- .NET SDK 9.0 или выше (для C# приложения)
- CMake 3.20 или выше (для сборки C++ библиотеки)

## Сборка проекта

### Сборка C++ библиотеки

1. Перейдите в корневую директорию проекта
2. Создайте директорию для сборки: `mkdir build && cd build`
3. Сконфигурируйте проект с CMake: `cmake ..`
4. Соберите проект: `cmake --build . --config Release`

### Сборка .NET приложения

1. Перейдите в корневую директорию проекта
2. Соберите проект: `dotnet build`

## Запуск приложения

После сборки запустите приложение командой:
```
dotnet run
```

Либо запустите исполняемый файл напрямую из директории `bin\Debug\net9.0-windows\`.

## Создание исполняемого файла (exe)

Для создания отдельного исполняемого файла, выполните:
```
dotnet publish -c Release -r win-x64 --self-contained
```

Исполняемый файл будет создан в директории `bin\Release\net9.0-windows\win-x64\publish\SpanningTree.exe`

> **Примечание:** Нативная библиотека `SpanningTreeCore.dll` будет автоматически скопирована в директорию публикации благодаря настройкам в файле проекта.

## Использование приложения

1. Создайте граф, добавляя вершины и рёбра через интерфейс
2. Выберите настройки алгоритма:
   - Постоянное остовное дерево - использует фиксированный seed для повторяемости результатов
   - Использовать параллельные вычисления - активирует многопоточный режим работы алгоритма
3. Нажмите кнопку "Найти остовное дерево" для запуска алгоритма
4. Результат будет визуализирован на панели справа

## Алгоритм

В приложении используется эвристический алгоритм поиска остовного дерева с максимальным количеством листьев, который перебирает все возможные стартовые вершины:

1. **Перебор всех стартовых вершин**: 
   - Алгоритм запускается для каждой вершины графа, рассматривая её как потенциальный корень остовного дерева.
   - Это увеличивает шансы найти лучшее решение по сравнению с выбором ограниченного набора стартовых точек.

2. **Эвристическое построение и оптимизация**: 
   - Для каждой стартовой вершины строится остовное дерево с использованием BFS, приоритезирующего вершины с высокой "эффективной" степенью.
   - Затем применяется итеративная локальная оптимизация для увеличения числа листьев.
   - Выбирается лучшее дерево из всех построенных.

3. **Параллельная обработка**:
   - Если опция включена, поиск деревьев для разных стартовых вершин выполняется параллельно на всех доступных ядрах процессора.
   - В последовательном режиме перебор стартовых вершин выполняется один за другим.

## Примечания

- Алгоритм является эвристикой и не гарантирует нахождение *абсолютно* оптимального решения (задача NP-трудная).
- Перебор всех стартовых вершин может быть **медленным** для больших графов, особенно в последовательном режиме.
- Параллельные вычисления существенно ускоряют работу на многоядерных системах.
- Результат работы детерминирован при использовании опции "Постоянное остовное дерево". 